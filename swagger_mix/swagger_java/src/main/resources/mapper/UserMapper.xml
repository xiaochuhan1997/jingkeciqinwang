<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.swagger.mapper.UserMapper">
    <resultMap id="UserWithDetailMap" type="com.example.swagger.entity.User">
        <id property="id" column="id"/>
        <result property="username" column="username"/>
        <result property="name" column="name"/>
        <result property="password" column="password"/>
        <result property="status" column="status"/>
        <collection property="userDetailList" ofType="com.example.swagger.entity.UserDetail">
            <id property="id" column="detail_id"/>
            <result property="userId" column="user_id"/>
            <!-- 其他属性的映射 -->
        </collection>
        <!-- 其他属性的映射 -->
    </resultMap>

    <select id="selectUserWithDetail" resultMap="UserWithDetailMap">
        SELECT u.id, u.username, u.name, u.password, u.status,
        d.id as detail_id, d.user_id, d.dhr_id, d.num_id,
        d.org_name, d.org_no, d.usap_id, d.user_mobile,
        d.user_name, d.wecom_user_id
        FROM user u
        LEFT JOIN user_detail d ON u.id = d.user_id
        WHERE u.id = #{id}
    </select>
</mapper>
